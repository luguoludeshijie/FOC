/*******************************************************************************
*
* 文件名称: Motor_Math.h
* 版 本 号: V1.0 
* 作    者: linbo.liu
* 生成日期: 2024年x月x日
* 功能描述: 
*
*******************************************************************************/
#ifndef _MOTOR_MATH_H_
#define _MOTOR_MATH_H_

/*******************************************************************************
 *-----------------------------------头文件-------------------------------------
 ******************************************************************************/
#include "Srv.h"


/*******************************************************************************
 *-----------------------------------宏定义-------------------------------------
 ******************************************************************************/
#define IQAngle_Range 0xFFF //   12位精度位置

#define Abs(A) ((A >= 0) ? A : -A)	 // 绝对值函数
#define Min(A, B) ((A <= B) ? A : B) // 求最小函数
#define Max(A, B) ((A >= B) ? A : B) // 求最大函数

#define Ang_SinCos_DEFAULTS {0, 0.0, 0.0}
#define GXieLv_DEFAULTS {0.0, 0.0, 0.0, 0}
#define IQAtan_DEFAULTS {0, 0, 0, 0, 0} 

/*******************************************************************************
 *---------------------------------数据类型定义----------------------------------
 ******************************************************************************/
typedef struct
{
	uint16_t table_Angle;
	float table_Sin;
	float table_Cos;
} Ang_SinCos, *p_Ang_SinCos;

typedef struct
{
	float Alpha;		// 二相静止坐标系 Alpha 轴
	float Beta;			// 二相静止坐标系 Beta 轴
	float IQTan;		// IQ格式正切 45度正切是1，IQ的格式是
	int16_t IQAngle;	// IQ格式角度值 0---65536 == 0---360度
	int16_t IQAngle_JZ; // IQ格式角度值 0---65536 == 0---360度
} IQAtan, *p_IQAtan;

typedef struct
{				   // 指令参数的斜率处理
	float XieLv_X; // 指令参数斜率输入变量x
	float XieLv_Y;
	float XieLv_Grad;
	uint8_t Timer_Count;
	uint8_t Grad_Timer;
} GXieLv, *p_GXieLv;


/*******************************************************************************
 *-----------------------------------常量定义------------------------------------
 ******************************************************************************/


/*******************************************************************************
 *-----------------------——--------全局变量定义----------------------------------
 ******************************************************************************/


/*******************************************************************************
 *-----------------------------------函数接口------------------------------------
 ******************************************************************************/
extern float Limit_Sat(float Uint, float U_max, float U_min); 
extern uint32_t IQSqrt(uint32_t M);
extern void Atan_Cale(p_IQAtan pV); 
extern void SinCos_Table(p_Ang_SinCos PV);
extern void Grad_XieLv(p_GXieLv pV);



/*******************************************************************************
 *---------------------------—----—--变量接口------------------------------------
 ******************************************************************************/

#endif
/*******************************************************************************
 *---------------------------—----—---结束--------------------------------------
 ******************************************************************************/