/*******************************************************************************
*
* 文件名称: Motor_transform.h
* 版 本 号: V1.0 
* 作    者: linbo.liu
* 生成日期: 2024年x月x日
* 功能描述: 
*
*******************************************************************************/
#ifndef _MOTOR_TRANSFORM_H_
#define _MOTOR_TRANSFORM_H_
/*******************************************************************************
 *-----------------------------------头文件-------------------------------------
 ******************************************************************************/
#include "Srv.h"

/*******************************************************************************
 *-----------------------------------宏定义-------------------------------------
 ******************************************************************************/


/*******************************************************************************
 *---------------------------------数据类型定义----------------------------------
 ******************************************************************************/
typedef struct
{
    float Us;    //  三相电流A
    float Vs;    //  三相电流B
    float Ws;    //  三相电流C
    float Alpha; //  二相静止坐标系 Alpha 轴
    float Beta;  //  二相静止坐标系 Beta 轴
} CLARKE, *p_CLARKE;

#define CLARKE_DEFAULTS {0, 0, 0, 0, 0} // 初始化参数

typedef struct
{
    float Alpha;    //  二相静止坐标系 Alpha 轴
    float Beta;     //  二相静止坐标系 Beta 轴
    uint16_t Angle; //  电机磁极位置角度0---65536即是0---360度
    float Ds;       //  电机二相旋转坐标系下的d轴电流
    float Qs;       //  电机二相旋转坐标系下的q轴电流
    float Sine;     //  正弦参数，-32768---32767  -1到1
    float Cosine;   //  余弦参数，-32768---32767  -1到1
} PARK, *p_PARK;

#define PARK_DEFAULTS {0, 0, 0, 0, 0, 0, 0} // 初始化参数

typedef struct
{
    float Alpha;  // 二相静止坐标系 Alpha 轴
    float Beta;   // 二相静止坐标系 Beta 轴
    uint16_t Angle;  // 电机磁极位置角度0---65536即是0---360度
    float Ds;     //  电机二相旋转坐标系下的d轴电流
    float Qs;     //  电机二相旋转坐标系下的q轴电流
    float Sine;   //  正弦参数，-32768---32767  -1到1
    float Cosine; //  余弦参数，-32768---32767  -1到1
} IPARK, *p_IPARK;

#define IPARK_DEFAULTS {0, 0, 0, 0, 0, 0, 0} // 初始化参数


/*******************************************************************************
 *-----------------------------------常量定义------------------------------------
 ******************************************************************************/


/*******************************************************************************
 *-----------------------——--------全局变量定义----------------------------------
 ******************************************************************************/


/*******************************************************************************
 *-----------------------------------函数接口------------------------------------
 ******************************************************************************/
extern void CLARKE_Cale(p_CLARKE pV); // 三相到二相变换 克拉克变换
extern void PARK_Cale(p_PARK pV);     // 二相到二相变换 怕克变换
extern void IPARK_Cale(p_IPARK pV);   // 二相到二相变换反怕克变换


/*******************************************************************************
 *---------------------------—----—--变量接口------------------------------------
 ******************************************************************************/

#endif
/*******************************************************************************
 *---------------------------—----—---结束--------------------------------------
 ******************************************************************************/
